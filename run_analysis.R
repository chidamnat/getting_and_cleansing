 train<-read.table("./train/X_train.txt")
test<-read.table("./test/X_test.txt")
features<-read.table("./features.txt")
y_test<-read.table("./test/y_test.txt")
y_train<-read.table("./train/y_train.txt")
sub_train<-read.table("./train/subject_train.txt")
sub_test<-read.table("./test/subject_test.txt")
data<-rbind(test,train)
y_data<-rbind(y_test,y_train)
sub_data<-rbind(sub_test,sub_train)
data1<-cbind(data,y_data,sub_data)
var_used<-grep("mean|std",features$V2)
var_used1=c(var_used,562,563)
data2<-data1[,var_used1]
activity_labels<-read.table("./activity_labels.txt")
merged_data=merge(data2,activity_labels,by.x="V1.2",by.y="V1",all=TRUE)
val_repl<-features$V2[var_used]
val_repl<-gsub("-",".",val_repl)
val_repl<-gsub("\\(\\)","",val_repl)
names(merged_data)
val_repl1<-c("Subject",val_repl,"Activity","Activity_name")
names(data3)<-val_repl1
data3$vars=rownames(data3)
varmelt<-melt(data3,id=c("Subject","Activity_name"),measure.vars=val_repl)
data4<-dcast(varmelt,Subject + Activity_name~variable,mean)
write.table(data4,"tidydata.txt")
